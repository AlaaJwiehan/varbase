type: action
status: true
targetEntityType: node
token_variant: bundle
event: config.save
event_config: node.type.CONTENT_TYPE
actions:
# -----------------------------------------------------------------------------.
# Add the node type to the Varbase Simple workflow.
# -----------------------------------------------------------------------------.
  - add:
      dependencies:
        module:
          - varbase_workflow
        config:
          - node.type.CONTENT_TYPE
          - workflows.workflow.varbase_simple_workflow
      target_config_name: workflows.workflow.varbase_simple_workflow
      target_config_path: entity_types
      target_config_expected_to_have:
        node: {  }
      target_config_expected_not_to_have:
        node:
          - CONTENT_TYPE
      target_config_value:
        node:
          - CONTENT_TYPE
# -----------------------------------------------------------------------------.
# Add default metatags config template when content types been created with
# only Basic tags metatags.
# -----------------------------------------------------------------------------.
  - add:
      dependencies:
        module:
          - metatag
        config:
          - node.type.CONTENT_TYPE
          - metatag.settings
      target_config_name: metatag.settings
      target_config_path: entity_type_groups
      target_config_expected_to_have:
        node: { }
      target_config_expected_not_to_have:
        node:
          CONTENT_TYPE: { }
      target_config_value:
        node:
          CONTENT_TYPE:
            basic: basic
  - import:
      dependencies:
        module:
          - metatag
        config:
          - field.storage.node.field_meta_tags
          - node.type.CONTENT_TYPE
      target_config_name: field.field.node.CONTENT_TYPE.field_meta_tags
      target_config_value:
        langcode: en
        status: true
        dependencies:
          config:
            - field.storage.node.field_meta_tags
            - node.type.CONTENT_TYPE
          module:
            - metatag
        id: node.CONTENT_TYPE.field_meta_tags
        field_name: field_meta_tags
        entity_type: node
        bundle: CONTENT_TYPE
        label: 'Meta tags'
        description: ''
        required: false
        translatable: true
        default_value: {  }
        default_value_callback: ''
        settings: {  }
        field_type: metatag