type: action
status: true
targetEntityType: node
token_variant: bundle
event: config.save
event_config: core.entity_form_display.node.CONTENT_TYPE.default
actions:
# -----------------------------------------------------------------------------.
# Add Length indicator to the title field for new content type.
# -----------------------------------------------------------------------------.
  - add:
      dependencies:
        module:
          - length_indicator
        config:
          - node.type.CONTENT_TYPE
          - core.entity_form_display.node.CONTENT_TYPE.default
      target_config_name: core.entity_form_display.node.CONTENT_TYPE.default
      target_config_path: content
      target_config_expected_to_have:
        title:
          third_party_settings:
            length_indicator: {  }
      target_config_value:
        title:
          third_party_settings:
            length_indicator:
              indicator: true
              indicator_opt:
                optimin: 15
                optimax: 50
                tolerance: 10
# -----------------------------------------------------------------------------.
# Add the Meta tag field for new content type.
# -----------------------------------------------------------------------------.
  - add:
      dependencies:
        module:
          - metatag
        config:
          - node.type.CONTENT_TYPE
          - core.entity_form_display.node.CONTENT_TYPE.default
      target_config_name: core.entity_form_display.node.CONTENT_TYPE.default
      target_config_path: content
      target_config_expected_to_have:
        field_meta_tags: {  }
      target_config_value:
        field_meta_tags:
          type: metatag_firehose
          weight: 15
          region: content
          settings:
            sidebar: true
          third_party_settings: {  }
      target_config_remove:
        path: hidden
        remove_index:
          field_meta_tags
